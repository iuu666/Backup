/*
酷狗概念版每日自动领取VIP-Eric专属
*/
var iｉl='jsjiami.cn.v7';function I11111II(_0x3ee4ce,_0x5f2576){const _0x4ed070=I1iIi1iI();return I11111II=function(_0x3cba23,_0x277fab){_0x3cba23=_0x3cba23-0x1a9;let _0x4d4774=_0x4ed070[_0x3cba23];if(I11111II['VtxjQA']===undefined){var _0x29afcf=function(_0x24edd8){const _0x2b08c4='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4649c6='',_0x7ac9f6='',_0x185168=_0x4649c6+_0x29afcf;for(let _0x1c1d7d=0x0,_0x5d274d,_0x409554,_0x4dc6ba=0x0;_0x409554=_0x24edd8['charAt'](_0x4dc6ba++);~_0x409554&&(_0x5d274d=_0x1c1d7d%0x4?_0x5d274d*0x40+_0x409554:_0x409554,_0x1c1d7d++%0x4)?_0x4649c6+=_0x185168['charCodeAt'](_0x4dc6ba+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x5d274d>>(-0x2*_0x1c1d7d&0x6)):_0x1c1d7d:0x0){_0x409554=_0x2b08c4['indexOf'](_0x409554);}for(let _0x80c62f=0x0,_0x428396=_0x4649c6['length'];_0x80c62f<_0x428396;_0x80c62f++){_0x7ac9f6+='%'+('00'+_0x4649c6['charCodeAt'](_0x80c62f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x7ac9f6);};const _0x1becde=function(_0x201eef,_0x10a90f){let _0x2604ac=[],_0x1627f6=0x0,_0x4b8a1d,_0x27dcf8='';_0x201eef=_0x29afcf(_0x201eef);let _0x3bbe52;for(_0x3bbe52=0x0;_0x3bbe52<0x100;_0x3bbe52++){_0x2604ac[_0x3bbe52]=_0x3bbe52;}for(_0x3bbe52=0x0;_0x3bbe52<0x100;_0x3bbe52++){_0x1627f6=(_0x1627f6+_0x2604ac[_0x3bbe52]+_0x10a90f['charCodeAt'](_0x3bbe52%_0x10a90f['length']))%0x100,_0x4b8a1d=_0x2604ac[_0x3bbe52],_0x2604ac[_0x3bbe52]=_0x2604ac[_0x1627f6],_0x2604ac[_0x1627f6]=_0x4b8a1d;}_0x3bbe52=0x0,_0x1627f6=0x0;for(let _0x2dda49=0x0;_0x2dda49<_0x201eef['length'];_0x2dda49++){_0x3bbe52=(_0x3bbe52+0x1)%0x100,_0x1627f6=(_0x1627f6+_0x2604ac[_0x3bbe52])%0x100,_0x4b8a1d=_0x2604ac[_0x3bbe52],_0x2604ac[_0x3bbe52]=_0x2604ac[_0x1627f6],_0x2604ac[_0x1627f6]=_0x4b8a1d,_0x27dcf8+=String['fromCharCode'](_0x201eef['charCodeAt'](_0x2dda49)^_0x2604ac[(_0x2604ac[_0x3bbe52]+_0x2604ac[_0x1627f6])%0x100]);}return _0x27dcf8;};I11111II['cdiNJf']=_0x1becde,_0x3ee4ce=arguments,I11111II['VtxjQA']=!![];}const _0x214ed7=_0x4ed070[0x0],_0x54fcb6=_0x3cba23+_0x214ed7,_0x46f1fb=_0x3ee4ce[_0x54fcb6];if(!_0x46f1fb){if(I11111II['ZHhqwa']===undefined){const _0x368bad=function(_0x385af5){this['bnZwTk']=_0x385af5,this['RwpQtZ']=[0x1,0x0,0x0],this['aaUmcI']=function(){return'newState';},this['ZZKswJ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['NfjHiw']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x368bad['prototype']['vRIbdc']=function(){const _0x290ffe=new RegExp(this['ZZKswJ']+this['NfjHiw']),_0x5ae0ca=_0x290ffe['test'](this['aaUmcI']['toString']())?--this['RwpQtZ'][0x1]:--this['RwpQtZ'][0x0];return this['xJSAvm'](_0x5ae0ca);},_0x368bad['prototype']['xJSAvm']=function(_0x43fa3e){if(!Boolean(~_0x43fa3e))return _0x43fa3e;return this['thPjJU'](this['bnZwTk']);},_0x368bad['prototype']['thPjJU']=function(_0x145dd2){for(let _0x26b930=0x0,_0x4363a4=this['RwpQtZ']['length'];_0x26b930<_0x4363a4;_0x26b930++){this['RwpQtZ']['push'](Math['round'](Math['random']())),_0x4363a4=this['RwpQtZ']['length'];}return _0x145dd2(this['RwpQtZ'][0x0]);},new _0x368bad(I11111II)['vRIbdc'](),I11111II['ZHhqwa']=!![];}_0x4d4774=I11111II['cdiNJf'](_0x4d4774,_0x277fab),_0x3ee4ce[_0x54fcb6]=_0x4d4774;}else _0x4d4774=_0x46f1fb;return _0x4d4774;},I11111II(_0x3ee4ce,_0x5f2576);}const iI1liil1=I11111II;if(function(li1ii1li,lIiI111i,ill1Ill,lliIIlI1,i11IlIii,ilIilI1i,IIIII1l){return li1ii1li=li1ii1li>>0x4,ilIilI1i='hs',IIIII1l='hs',function(ii11lIl,lilIiliI,IlI1lIiI,Ili1111l,illlIiiI){const IiiiiIi=I11111II;Ili1111l='tfi',ilIilI1i=Ili1111l+ilIilI1i,illlIiiI='up',IIIII1l+=illlIiiI,ilIilI1i=IlI1lIiI(ilIilI1i),IIIII1l=IlI1lIiI(IIIII1l),IlI1lIiI=0x0;const i1i1Il1i=ii11lIl();while(!![]&&--lliIIlI1+lilIiliI){try{Ili1111l=parseInt(IiiiiIi(0x1df,'%EgR'))/0x1*(parseInt(IiiiiIi(0x1b8,'bNW#'))/0x2)+-parseInt(IiiiiIi(0x207,'&59U'))/0x3*(parseInt(IiiiiIi(0x228,'a#!O'))/0x4)+-parseInt(IiiiiIi(0x1b5,'t5c!'))/0x5*(parseInt(IiiiiIi(0x1bc,'d$m2'))/0x6)+parseInt(IiiiiIi(0x1e4,'bSKQ'))/0x7+parseInt(IiiiiIi(0x20b,'EhJ3'))/0x8*(-parseInt(IiiiiIi(0x222,'^okz'))/0x9)+-parseInt(IiiiiIi(0x1a9,'bI3Z'))/0xa+parseInt(IiiiiIi(0x1e1,'ilvK'))/0xb;}catch(il1ilIll){Ili1111l=IlI1lIiI;}finally{illlIiiI=i1i1Il1i[ilIilI1i]();if(li1ii1li<=lliIIlI1)IlI1lIiI?i11IlIii?Ili1111l=illlIiiI:i11IlIii=illlIiiI:IlI1lIiI=illlIiiI;else{if(IlI1lIiI==i11IlIii['replace'](/[MSUXLdQyqtGNloHIfh=]/g,'')){if(Ili1111l===lilIiliI){i1i1Il1i['un'+ilIilI1i](illlIiiI);break;}i1i1Il1i[IIIII1l](illlIiiI);}}}}}(ill1Ill,lIiI111i,function(i1iI1I,Illili11,l1I11lll,iii1IIII,iIIIIi1I,IIillili,IIiIIli){return Illili11='\x73\x70\x6c\x69\x74',i1iI1I=arguments[0x0],i1iI1I=i1iI1I[Illili11](''),l1I11lll=`\x72\x65\x76\x65\x72\x73\x65`,i1iI1I=i1iI1I[l1I11lll]('\x76'),iii1IIII=`\x6a\x6f\x69\x6e`,(0x17f448,i1iI1I[iii1IIII](''));});}(0xc50,0x718f9,I1iIi1iI,0xc7),I1iIi1iI){}function I1iIi1iI(){const lIll1lil=(function(){return[...[iｉl,'qXfjQIdsoSyjUtiamdhiLI.GcINMnyN.XHv7Xfl==','WOtcQ8kwW4D0','5PAB5O6f5BEZ5O+y5lUQ5y6H5l2V5A+v','y8oAeaat','emkkdCobW6HuqCodWQBdQWhcGG','t8ovW4a7WQC','FmkehgdcQxa','iG/cMNqAAa','W6TrW5GUW4/dImkCW5JdUG','W5hcUSo8','mSkbq13cIwmrW4z3wW','W5RdHfy','WRaAdG','WRBdK1K','iCoJqW','W5FdPSoy','dK1ZWPlcQG','frxcTmo9dG','oWdcKCoufSk8ESkFn8k3WRO','tCkQthZcHW','WPJdMeldSWe','ySoabWlcPq','cmoBzZ0D','esxcU8o5lq','WOZdOmkUW6KaWOrMxhm','W5/cK8oRWOvqW7ONWPddSSo+','W44rWQ3cVZBdSZdcUSotusL3pcy','mdNdTZVcNLPJF1K','WPpcSmkErdiQWQ5ykW','W7SdnmkAW7q','kW3cUmkUWPFdKSoVdmk2','h09AWPNcU8kcW7He','r8oFeGSZWOO','AuZdV8koWPBdLSoTa8ko','vCoiaWCTWPKJegm','ymkgW7hcINxdGmkxaYZcHmorvCoIWPi','evax','fmkodSojW65xm8oqWQ7dNbRcKZW','W6LbxxFdUSknW5W7cf7cR8kTWOa','W7bDW54KW4VdJSk5W4VdRretW7G','W4ZcKbFdUWa','d1jxWOVcV8kaW6rdzeRcHa','W5NdPmoyza0iWQG','5lYm5A+U55QPWR8ZsColBZxcMCkMW6WCxmox','tmotxG','WOTnW5pdL3u','WPhcMmkcW4a8','5l6P5A+I55QRzCoaW495ta09WOFdPSo4BSkbW6JcRL8','hqZdJ8kAoW','WQBdHetdQWm','F2qRrCkB','WR7cTGKXyG','sSktkKe/','BXPk','mbRcI28D','r8k0W4TBza','p3WbAw/dK8kiqG','b1OuWOZcO8ktW6ji','W6ZdKqjGeW','WP7cNMJcVq','WRBcVSkDWPaQDHy4','W5BdLfiLb8okfatdImoyWRT0WRFcG8ol','CmkEv0ZcSq','5PsK5OYC5Bsk5l2U5AYN5yUI5OYA5lQ25y205A6D5yg+WPDdFhPT5lQC5Oom5O+f5l27','W7mcoW','omo/qquMma'],...(function(){return['W7tcSHPIfvH+AmkVqwKoW4xdPdi','w8knCfBcQCo2WOu','W7JdLCogssO','W5FcVW8mW4b0WR1JnmktWPen','W7lcTa0','W4yxWQhcUdtdVJpdHmo/ycbDpq','v3acC8kR','W73dImo8W4FcJ8k9rNq7W6S','qI0qmYldTq','W7BcVrbIc1GLAmkZ','E8kolMBcUhenWOm','vrjmWPhcV8knW6uOqSoerfK','kXZcQ8k1WPRdNq','rc1kjci','ACk9gLa/','gr7cHSkjWOG','zCkKdfLKFCouW5bTACkImq','z8oFgqS','WO3cSLWXEmoNpSoAWRrEWPVcMW','W5pcQI7dUIW','W6pcMqVdUHC','WOtcVmkeW6yR','WRBcVKOWCcRcQLBcOfHM','W6XxW5qLW4a','W5NdTCoErbCkWQXSnG','W6tdImo5W7KzWRDsWO3cUW','lrFcO8oQWOZdHSoJgmkUrZBdT8oa','WRlcN8kEWRm1','WO4JdHtcNq','W4VdQWXHjSk+kSoxWOC','W5hcJri','W6TmW40PW4ddM8kaW4ZdPG','d1fqWP3cPCkgW6vjFua','F8kCW5JdGmkeWQq','n8khqbNcIeO1W7D2','A8ovfGRcUxik','khW8AxJdLmkscfddGX1YsCkm','WONcN8kPWPRcIG','gCopBH8P','WRlcTfa','nSoqt3VcGv8iWRz4','pXZcVG','5l+v5AYN55Q6Ev3cRCoSzCofW5JcRdXqhMhcHSo5','6ywj54Ig5QEa5B+Y54Iv6iEJ5yQR6Acc5yYTW7qoy8kvymkqFJW','dSohWOyioCkKW43cKmkHCmolpeq','oSovW6tdNIlcK8ob','meCnAx/cP8o2CCovW50','WPWrdvz0','W4lcOmkhWRftW4jhimonF8outX7dKq','W5OlpCkYW5C','WQxcJCkI','WO/cJwJcVq','WRFcM8o9WPL/','6i6/5y6P5Pwo5OY35OIc5yMa','yulcGmoceCkLy8kG','WOTkW4BdUxlcOM3dQq','W7FdOCk2WPu2Aaam','WPrcWRJdV2m','WPHaW6e','vaukW4JcPSkkW6jtAu4','WPKJeuiWoCkSWQP1Aq','EW9smgy','tI9j','aSonWOmVW7rjjmouomkSg8o1','W7LiW48SW5C','WQdcO0GtzsRcVLJcPW'];}())];}());I1iIi1iI=function(){return lIll1lil;};return I1iIi1iI();};const ill11iii=new Env(iI1liil1(0x22b,'MCZI'));if($request[iI1liil1(0x1af,'$!V&')]){let i1lIIii1=$request[iI1liil1(0x1e2,'EhJ3')],i1lIllI1=$request[iI1liil1(0x223,'^okz')],Il11lI1=new URLSearchParams(i1lIIii1[iI1liil1(0x1ba,'e5pb')]('?')[0x1]),IIIiiili={'appid':Il11lI1[iI1liil1(0x204,'I3nV')](iI1liil1(0x1f4,'MXRZ')),'clientver':Il11lI1[iI1liil1(0x227,'UaTG')](iI1liil1(0x209,'I3nV')),'clienttime':Il11lI1[iI1liil1(0x1cb,'oG3!')](iI1liil1(0x220,'bNW#')),'mid':Il11lI1[iI1liil1(0x1f3,'e5pb')](iI1liil1(0x1ea,'qY6^')),'uuid':Il11lI1[iI1liil1(0x21e,'#Pw)')](iI1liil1(0x1f9,'OW]$')),'dfid':Il11lI1[iI1liil1(0x229,'%EgR')](iI1liil1(0x1b0,'OW]$')),'token':Il11lI1[iI1liil1(0x1f3,'e5pb')](iI1liil1(0x217,'BSPm')),'userid':Il11lI1[iI1liil1(0x1bb,'M#f$')](iI1liil1(0x1ff,'TD&p')),'srcappid':Il11lI1[iI1liil1(0x1cd,'Yufc')](iI1liil1(0x1dd,'bNW#')),'signature':Il11lI1[iI1liil1(0x1b7,'@TDz')](iI1liil1(0x1c6,'BSPm'))},IIlii={':authority':i1lIllI1[iI1liil1(0x1d7,'uxmK')],'content-type':i1lIllI1[iI1liil1(0x203,'wrdD')],'kg-rf':i1lIllI1[iI1liil1(0x1f1,'UaTG')],'accept':i1lIllI1[iI1liil1(0x1de,')qpZ')],'kg-thash':i1lIllI1[iI1liil1(0x1f7,'bNW#')],'accept-language':i1lIllI1[iI1liil1(0x1fb,'gRRd')],'accept-encoding':i1lIllI1[iI1liil1(0x200,'I3nV')],'kg-rec':i1lIllI1[iI1liil1(0x208,'M#f$')],'user-agent':i1lIllI1[iI1liil1(0x1b9,'W^Nq')],'kg-rc':i1lIllI1[iI1liil1(0x1b6,'@TDz')],'kg-fake':i1lIllI1[iI1liil1(0x1aa,'ilvK')],'content-length':i1lIllI1[iI1liil1(0x224,'x)CP')],'uni-useragent':i1lIllI1[iI1liil1(0x21a,'%EgR')]};function IlI1Illi(iliIlii,IiiI1lI){const llli1lli=iI1liil1,lIiilI11={'EfanP':llli1lli(0x210,'TD&p'),'AgLNq':function(Il1lI11i,illII1ll){return Il1lI11i!==illII1ll;},'yiIMY':llli1lli(0x1f2,'MCZI'),'zxqbv':llli1lli(0x1d2,'oG3!'),'thFZu':llli1lli(0x21c,'bSKQ'),'dnhFs':function(iI1II1Ii,iIii1ill,i11Iili){return iI1II1Ii(iIii1ill,i11Iili);},'RichG':function(illlIlil){return illlIlil();},'mgwee':function(I11lIllI,IllIIi1){return I11lIllI!==IllIIi1;},'eBHcZ':llli1lli(0x21d,']Fi!'),'WlXWb':function(liiIII1i,IlI11li1){return liiIII1i!==IlI11li1;},'pNPWm':function(I11II1lI,lil1Ii1l){return I11II1lI!==lil1Ii1l;},'mzbjB':function(iiiiiil,l1IIilI){return iiiiiil===l1IIilI;},'TCJhf':llli1lli(0x214,'#Pw)')},ililiil=(function(){const I1l1lii1=llli1lli,I1IiIIl1={'RTjdS':lIiilI11[I1l1lii1(0x1c1,')qpZ')],'bpJja':function(iiIili1l,ilIlIIiI){const Ii1lIlll=I1l1lii1;return lIiilI11[Ii1lIlll(0x1cf,'$e3!')](iiIili1l,ilIlIIiI);},'EWCJR':lIiilI11[I1l1lii1(0x1bf,'fC[8')],'XvSSl':function(liIli1I,IliI){const IlIiIliI=I1l1lii1;return lIiilI11[IlIiIliI(0x20f,'%EgR')](liIli1I,IliI);},'pAyfi':lIiilI11[I1l1lii1(0x1e6,'#Pw)')]};if(lIiilI11[I1l1lii1(0x1ec,'$!V&')](lIiilI11[I1l1lii1(0x1eb,'@TDz')],lIiilI11[I1l1lii1(0x1f0,'ZxsE')]))return ll1Illii[I1l1lii1(0x1fa,'t5c!')]()[I1l1lii1(0x1c4,'a#!O')](gqPdFi[I1l1lii1(0x1f8,']Fi!')])[I1l1lii1(0x1f6,'x)CP')]()[I1l1lii1(0x216,'UaTG')](Il1il1I1)[I1l1lii1(0x221,']2Db')](gqPdFi[I1l1lii1(0x202,'pYEt')]);else{let iIIiI1ii=!![];return function(iII1Ii1i,IIliIi11){const iiIlii=I1l1lii1;if(I1IiIIl1[iiIlii(0x1fc,'S^4e')](I1IiIIl1[iiIlii(0x1f5,'bI3Z')],I1IiIIl1[iiIlii(0x1ac,'W^Nq')])){if(lI1Iii1I){const lII1il1l=ii1iIiII[iiIlii(0x1bd,'BSPm')](Ii1IIliI,arguments);return l1il1ilI=null,lII1il1l;}}else{const iII1il=iIIiI1ii?function(){const lIi1lIiI=iiIlii;if(I1IiIIl1[lIi1lIiI(0x1ce,'bNW#')](I1IiIIl1[lIi1lIiI(0x1d4,'TD&p')],I1IiIIl1[lIi1lIiI(0x1d5,'$e3!')]))return Ii1ilIlI[lIi1lIiI(0x201,'S^4e')](llIlIIli,liiIiI1I[lIi1lIiI(0x1dc,'%EgR')](Ii11l1l1));else{if(IIliIi11){const il111i1l=IIliIi11[lIi1lIiI(0x206,'WqDB')](iII1Ii1i,arguments);return IIliIi11=null,il111i1l;}}}:function(){};return iIIiI1ii=![],iII1il;}};}}()),lIlliIll=lIiilI11[llli1lli(0x1db,'^YEs')](ililiil,this,function(){const llIIlii1=llli1lli;return lIlliIll[llIIlii1(0x1b4,'@TDz')]()[llIIlii1(0x20c,'%EgR')](lIiilI11[llIIlii1(0x1ae,'^YEs')])[llIIlii1(0x20a,'a#!O')]()[llIIlii1(0x1e7,'bNW#')](lIlliIll)[llIIlii1(0x1c5,'MXRZ')](lIiilI11[llIIlii1(0x225,'&59U')]);});lIiilI11[llli1lli(0x1b1,'uxmK')](lIlliIll);if(lIiilI11[llli1lli(0x20d,'M#f$')](typeof $prefs,lIiilI11[llli1lli(0x213,'#Pw)')]))return $prefs[llli1lli(0x1ad,'T7Dh')](JSON[llli1lli(0x1e0,')qpZ')](IiiI1lI),iliIlii);else{if(lIiilI11[llli1lli(0x20e,'MCZI')](typeof $persistentStore,lIiilI11[llli1lli(0x1d1,'S^4e')]))return $persistentStore[llli1lli(0x1ef,'oG3!')](JSON[llli1lli(0x1d9,'fFOx')](IiiI1lI),iliIlii);else{if(lIiilI11[llli1lli(0x21b,'t5c!')](typeof $persistent,lIiilI11[llli1lli(0x1ee,'%SN)')])){if(lIiilI11[llli1lli(0x1c3,'a8*3')](lIiilI11[llli1lli(0x215,'$!V&')],lIiilI11[llli1lli(0x226,'TD&p')]))return $persistent[llli1lli(0x1e8,'pYEt')](iliIlii,JSON[llli1lli(0x1d9,'fFOx')](IiiI1lI));else{const l1lI1ii=l1l1l1ll?function(){const l1ili11l=llli1lli;if(lI1IIIii){const iii1111=Iii11lI[l1ili11l(0x1d3,'^okz')](i11i1il1,arguments);return I1111i1I=null,iii1111;}}:function(){};return liiIl1il=![],l1lI1ii;}}}}}IlI1Illi(iI1liil1(0x1be,'UaTG'),IIIiiili),IlI1Illi(iI1liil1(0x1e5,'BSPm'),IIlii),IlI1Illi(iI1liil1(0x1d0,'$e3!'),i1lIIii1),ill11iii[iI1liil1(0x1ca,'bSKQ')](iI1liil1(0x1e9,'oG3!'),JSON[iI1liil1(0x218,'pYEt')](IIIiiili)),ill11iii[iI1liil1(0x1cc,'TD&p')](iI1liil1(0x1ed,'xypS'),JSON[iI1liil1(0x21f,'BSPm')](IIlii)),ill11iii[iI1liil1(0x1c7,'L05f')](iI1liil1(0x22a,'e5pb'),i1lIIii1),ill11iii[iI1liil1(0x1fe,'^YEs')](iI1liil1(0x1fd,'$e3!')),ill11iii[iI1liil1(0x1c9,'gRRd')](iI1liil1(0x1b2,'e5pb'),iI1liil1(0x1c0,'OW]$'),''),ill11iii[iI1liil1(0x211,'^okz')]();}
//
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,a)=>{s.call(this,t,(t,s,r)=>{t?a(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const a=this.getdata(t);if(a)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,a)=>e(a))})}runScript(t,e){return new Promise(s=>{let a=this.getdata("@chavy_boxjs_userCfgs.httpapi");a=a?a.replace(/\n/g,"").trim():a;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[i,o]=a.split("@"),n={url:`http://${o}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":i,Accept:"*/*"},timeout:r};this.post(n,(t,e,a)=>s(a))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e);if(!s&&!a)return{};{const a=s?t:e;try{return JSON.parse(this.fs.readFileSync(a))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):a?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const a=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of a)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,a)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[a+1])>>0==+e[a+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,a]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,a,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,a,r]=/^@(.*?)\.(.*?)$/.exec(e),i=this.getval(a),o=a?"null"===i?null:i||"{}":"{}";try{const e=JSON.parse(o);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),a)}catch(e){const i={};this.lodash_set(i,r,t),s=this.setval(JSON.stringify(i),a)}}else s=this.setval(t,e);return s}getval(t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(t);case"Quantumult X":return $prefs.valueForKey(t);case"Node.js":return this.data=this.loaddata(),this.data[t];default:return this.data&&this.data[t]||null}}setval(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(t,e);case"Quantumult X":return $prefs.setValueForKey(t,e);case"Node.js":return this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0;default:return this.data&&this.data[e]||null}}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){switch(t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"],delete t.headers["content-type"],delete t.headers["content-length"]),t.params&&(t.url+="?"+this.queryStr(t.params)),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:a,statusCode:r,headers:i,rawBody:o}=t,n=s.decode(o,this.encoding);e(null,{status:a,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:a,response:r}=t;e(a,r,r&&s.decode(r.rawBody,this.encoding))})}}post(t,e=(()=>{})){const s=t.method?t.method.toLocaleLowerCase():"post";switch(t.body&&t.headers&&!t.headers["Content-Type"]&&!t.headers["content-type"]&&(t.headers["content-type"]="application/x-www-form-urlencoded"),t.headers&&(delete t.headers["Content-Length"],delete t.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":t.method=s,this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let a=require("iconv-lite");this.initGotEnv(t);const{url:r,...i}=t;this.got[s](r,i).then(t=>{const{statusCode:s,statusCode:r,headers:i,rawBody:o}=t,n=a.decode(o,this.encoding);e(null,{status:s,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:s,response:r}=t;e(s,r,r&&a.decode(r.rawBody,this.encoding))})}}time(t,e=null){const s=e?new Date(e):new Date;let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in a)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[e]:("00"+a[e]).substr((""+a[e]).length)));return t}queryStr(t){let e="";for(const s in t){let a=t[s];null!=a&&""!==a&&("object"==typeof a&&(a=JSON.stringify(a)),e+=`${s}=${a}&`)}return e=e.substring(0,e.length-1),e}msg(e=t,s="",a="",r){const i=t=>{switch(typeof t){case void 0:return t;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:t};case"Loon":case"Shadowrocket":return t;case"Quantumult X":return{"open-url":t};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{let e=t.url||t.openUrl||t["open-url"];return{url:e}}case"Loon":{let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}case"Quantumult X":{let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl,a=t["update-pasteboard"]||t.updatePasteboard;return{"open-url":e,"media-url":s,"update-pasteboard":a}}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(e,s,a,i(r));break;case"Quantumult X":$notify(e,s,a,i(r));break;case"Node.js":}if(!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),a&&t.push(a),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`❗️${this.name}, 错误!`,t);break;case"Node.js":this.log("",`❗️${this.name}, 错误!`,t.stack)}}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;switch(this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(t);break;case"Node.js":process.exit(1)}}}(t,e)}去
